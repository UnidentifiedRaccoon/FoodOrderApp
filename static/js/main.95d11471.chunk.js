(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__3GWbX",delete:"CartItem_delete__3Cerd",summary:"CartItem_summary__-7I_I",price:"CartItem_price__3hC0A",amount:"CartItem_amount__3NHEQ",actions:"CartItem_actions__1Mx66"}},function(e,t,n){e.exports={form:"Checkout_form__3qdaP","checkout-control":"Checkout_checkout-control__2MzLO",actions:"Checkout_actions__1gLDR"}},function(e,t,n){e.exports={button:"HeaderCartButton_button__29ABB",icon:"HeaderCartButton_icon__hB9Zv",badge:"HeaderCartButton_badge__3D4f9",bump:"HeaderCartButton_bump__3WoBq",text:"HeaderCartButton_text__eZK-i"}},,,function(e,t,n){e.exports={"loading-wrapper":"LoadingCircle_loading-wrapper__1itm9",loading:"LoadingCircle_loading__maHdI","loading-after":"LoadingCircle_loading-after__EdG31","loading-before":"LoadingCircle_loading-before__3yOVv"}},function(e,t,n){e.exports={"cart-items":"Cart__cart-items__13T64",total:"Cart__total__1V59j",actions:"Cart__actions__1EgSK"}},,function(e,t,n){e.exports={meal:"MealItem_meal__1fOew",description:"MealItem_description__d9CaU",price:"MealItem_price__3VBGi"}},,function(e,t,n){e.exports={header:"Header_header__3Vf7w","main-image":"Header_main-image__1ZGtd"}},function(e,t,n){e.exports={control:"Input_control__UFPBj",invalid:"Input_invalid__2HiKd"}},,function(e,t,n){e.exports={button:"Button_button__3LKMv","button--alt":"Button_button--alt__3_3xw"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__3U4u_",modal:"Modal_modal__3VAax","slide-down":"Modal_slide-down__3hYoc"}},function(e,t,n){e.exports={summary:"MealsSummary_summary__2_EeP"}},function(e,t,n){e.exports={meals:"AvailableMeals_meals__3cyHb","meals-appear":"AvailableMeals_meals-appear__2PQD9"}},function(e,t,n){e.exports={card:"Card_card__2d7Zc"}},function(e,t,n){e.exports={form:"MealItemForm_form__2yJ2x"}},function(e,t,n){e.exports={error:"ErrorMessage_error__2kRQL"}},,,,,,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(7),c=n.n(a),r=(n(30),n(2)),i=n(14),o=n.n(i),s=n.p+"static/media/Pizza.61a8b5e6.jpg",l=n(6),u=n.n(l),d=n(0),j=function(){return Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(d.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},m=n(25),b=n(1),h=n.n(b),O="CLEAR",x=h.a.createContext({items:[],itemsAmount:0,totalPrice:0,maxAmountForEachItem:10,setItem:function(e){},clearOrder:function(){}}),f={items:[],itemsAmount:0,totalPrice:0},p=function(e,t){if("SET"===t.type){var n,a,c,r=e.items.findIndex((function(e){return e.id===t.item.id}));return-1===r?(c=e.items.concat(t.item),n=e.itemsAmount+t.item.amount,a=e.totalPrice+t.item.amount*t.item.price):(c=Object(m.a)(e.items),n=e.itemsAmount+t.item.amount-c[r].amount,a=e.totalPrice+(t.item.amount-c[r].amount)*c[r].price,c[r]=t.item),{items:c=c.filter((function(e){return 0!==e.amount})),itemsAmount:n,totalPrice:Math.abs(a)}}return t.type===O?f:e},_=function(e){var t=Object(b.useReducer)(p,f),n=Object(r.a)(t,2),a=n[0],c=n[1];return Object(d.jsx)(x.Provider,{value:{items:a.items,itemsAmount:a.itemsAmount,totalPrice:a.totalPrice,maxAmountForEachItem:20,setItem:function(e){c({type:"SET",item:e})},clearOrder:function(e){c({type:O})}},children:e.children})},v=x,C=function(e){var t=Object(b.useContext)(v),n=Object(b.useState)(!1),a=Object(r.a)(n,2),c=a[0],i=a[1],o="".concat(u.a.button," ").concat(c?u.a.bump:"");return Object(b.useEffect)((function(){if(!(t.itemsAmount<1)){i(!0);var e=setTimeout((function(){i(!1)}),300);return function(){clearTimeout(e)}}}),[t.itemsAmount]),Object(d.jsxs)("button",{className:o,onClick:e.onClick,children:[Object(d.jsx)("span",{className:u.a.icon,children:Object(d.jsx)(j,{})}),Object(d.jsx)("span",{className:u.a.text,children:"Your card"}),Object(d.jsx)("span",{className:u.a.badge,children:t.itemsAmount})]})},g=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{className:o.a.header,children:[Object(d.jsx)("h1",{children:"MealFull"}),Object(d.jsx)(C,{onClick:e.onCartShow,l:!0})]}),Object(d.jsx)("div",{className:o.a["main-image"],children:Object(d.jsx)("img",{src:s,alt:"Delicious chicken thin crust pizza"})})]})},y=n(19),k=n.n(y),N=function(){return Object(d.jsxs)("section",{className:k.a.summary,children:[Object(d.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(d.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(d.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})},A=n(20),I=n.n(A),M=n(21),w=n.n(M),S=function(e){return Object(d.jsx)("div",{className:w.a.card,children:e.children})},H=n(12),P=n.n(H),E=n(22),F=n.n(E),B=n(3),D=n(15),T=n.n(D),L=h.a.forwardRef((function(e,t){console.log("input render");var n="".concat(T.a.control," ").concat(e.classes," ").concat(e.invalid?T.a.invalid:"");return Object(d.jsxs)("div",{className:n,children:[Object(d.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(d.jsx)("input",Object(B.a)(Object(B.a)({},e.input),{},{ref:t})),e.invalid&&Object(d.jsx)("p",{children:e.errorMessage})]})})),R=function(e){var t=Object(b.useState)(!0),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(b.useRef)();return Object(d.jsxs)("form",{className:F.a.form,onSubmit:function(t){t.preventDefault();var n=+i.current.value;n<0||n>e.maxValue?c(!1):(c(!0),e.onSetAmount(n))},noValidate:!0,children:[Object(d.jsx)(L,{input:{id:"amount_"+e.id,type:"number",min:"0",max:e.maxValue,step:"1",defaultValue:0},label:"Amount",ref:i}),Object(d.jsx)("button",{children:"Apply"}),!a&&Object(d.jsx)("p",{children:"Please enter a valid amount (0-".concat(e.maxValue,")")})]})},V=function(e){var t=Object(b.useContext)(v),n="$".concat(e.price.toFixed(2));return Object(d.jsxs)("li",{className:P.a.meal,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:e.name}),Object(d.jsx)("div",{className:P.a.description,children:e.description}),Object(d.jsx)("div",{className:P.a.price,children:n})]}),Object(d.jsx)("div",{children:Object(d.jsx)(R,{id:e.id,onSetAmount:function(n){var a={id:e.id,name:e.name,price:e.price,amount:n};t.setItem(a)},maxValue:t.maxAmountForEachItem})})]})},z=n(9),q=n.n(z),G=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:q.a["loading-wrapper"],children:[Object(d.jsx)("span",{className:q.a["loading-before"]}),Object(d.jsx)("span",{className:q.a.loading}),Object(d.jsx)("span",{className:q.a["loading-after"]})]})})},Y=n(23),J=n.n(Y),K=function(e){return Object(d.jsx)("div",{className:J.a.error,children:e.children})},Z=n(16),Q=n.n(Z),U=n(24),$=function(){var e=Object(b.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(b.useState)(!1),i=Object(r.a)(c,2),o=i[0],s=i[1],l=Object(b.useCallback)(function(){var e=Object(U.a)(Q.a.mark((function e(t,n){var c,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),s(!1),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"GET",headers:t.headers?t.headers:{},body:t.body?JSON.stringify(t.body):null});case 5:if((c=e.sent).ok){e.next=8;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445");case 8:return e.next=10,c.json();case 10:r=e.sent,null!==n&&n(r),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),s({message:e.t0.message});case 18:a(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{isLoading:n,error:o,fetchData:l}},W=function(){var e=$(),t=e.isLoading,n=e.error,a=e.fetchData,c=Object(b.useState)([]),i=Object(r.a)(c,2),o=i[0],s=i[1],l=Object(b.useMemo)((function(){return{url:"https://foodorderapp-2a227-default-rtdb.firebaseio.com/menu.json"}}),[]),u=Object(b.useCallback)((function(e){for(var t=[],n=0,a=Object.keys(e);n<a.length;n++){var c=a[n];t.push({id:c,name:e[c].name,price:e[c].price,description:e[c].description})}s(t)}),[]);Object(b.useEffect)((function(){a(l,u)}),[a,l,u]);var j=o.map((function(e){return Object(d.jsx)(V,{name:e.name,price:e.price,description:e.description,id:e.id},e.id)}));return Object(d.jsx)("section",{className:I.a.meals,children:Object(d.jsxs)(S,{children:[Object(d.jsx)("ul",{children:j}),n&&Object(d.jsxs)(K,{children:[Object(d.jsx)("h3",{children:n.message}),Object(d.jsx)("span",{children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u0447\u0435\u0440\u0435\u0437 \u043c\u0438\u043d\u0443\u0442\u0443 \u0438\u043b\u0438 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"})]}),t&&!n&&Object(d.jsx)(G,{})]})})},X=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(W,{})]})},ee=n(10),te=n.n(ee),ne=n(17),ae=n.n(ne),ce=function(e){var t="".concat(ae.a.button," ").concat(e.alt?ae.a["button--alt"]:"");return Object(d.jsx)("button",{className:t,type:e.type,onClick:e.onClick,children:e.children})},re=n(18),ie=n.n(re),oe=function(e){return Object(d.jsx)("div",{className:ie.a.backdrop,onClick:e.onClick})},se=function(e){return Object(d.jsx)("div",{className:ie.a.modal,children:e.children})},le=document.querySelector("#backdrop-root"),ue=document.querySelector("#overlay-root"),de=function(e){return Object(d.jsxs)(d.Fragment,{children:[c.a.createPortal(Object(d.jsx)(oe,{onClick:e.onClick}),le),c.a.createPortal(Object(d.jsx)(se,{children:e.children}),ue)]})},je=n(4),me=n.n(je),be=function(e){var t="$".concat(e.price.toFixed(2));return Object(d.jsxs)("li",{className:me.a["cart-item"],children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("h2",{children:[Object(d.jsx)("button",{className:me.a.delete,onClick:e.onDelete,children:"X"}),e.name]}),Object(d.jsxs)("div",{className:me.a.summary,children:[Object(d.jsx)("span",{className:me.a.price,children:t}),Object(d.jsxs)("span",{className:me.a.amount,children:["x ",e.amount]})]})]}),Object(d.jsxs)("div",{className:me.a.actions,children:[Object(d.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(d.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},he=n(5),Oe=n.n(he),xe=function(e){return""===e.trim()},fe=function(e){var t=Object(b.useRef)(),n=Object(b.useRef)(),a=Object(b.useRef)(),c=Object(b.useRef)(),i=Object(b.useState)({name:!0,street:!0,postalCode:!0,city:!0}),o=Object(r.a)(i,2),s=o[0],l=o[1];return Object(d.jsxs)("form",{onSubmit:function(r){r.preventDefault();var i=!xe(t.current.value),o=!xe(n.current.value),s=!xe(c.current.value),u=6===a.current.value.trim().length,d=i&&o&&u&&s;l({name:i,street:o,postalCode:u,city:s}),d&&e.onConfirm({name:t.current.value,street:n.current.value,postal:c.current.value,city:a.current.value})},className:Oe.a.form,children:[Object(d.jsx)(L,{classes:Oe.a["checkout-control"],input:{id:"confirm-name",type:"text"},label:"Your Name",ref:t,errorMessage:"This field should be filled",invalid:!s.name}),Object(d.jsx)(L,{classes:Oe.a["checkout-control"],input:{id:"confirm-street",type:"text"},label:"Street",ref:n,errorMessage:"This field should be filled",invalid:!s.street}),Object(d.jsx)(L,{classes:Oe.a["checkout-control"],input:{id:"confirm-postalCode",type:"text"},label:"Postal Code",ref:a,errorMessage:"Enter valid Postal Code (6 characters)",invalid:!s.postalCode}),Object(d.jsx)(L,{classes:Oe.a["checkout-control"],input:{id:"confirm-city",type:"text"},label:"City",ref:c,errorMessage:"This field should be filled",invalid:!s.city}),Object(d.jsxs)("div",{className:Oe.a.actions,children:[Object(d.jsx)(ce,{alt:!0,type:"button",onClick:e.onCartHide,children:"Cancel"}),Object(d.jsx)(ce,{type:"submit",children:"Confirm"})]})]})},pe=void 0,_e=function(e){var t=Object(b.useContext)(v),n=Object(b.useState)(!1),a=Object(r.a)(n,2),c=a[0],i=a[1],o=$(),s=o.isLoading,l=o.error,u=o.fetchData,j=Object(b.useState)(!1),m=Object(r.a)(j,2),h=m[0],O=m[1],x="$".concat(t.totalPrice.toFixed(2)),f=t.items.length>0,p=function(e){var n=e.amount+1;if(n<=t.maxAmountForEachItem){var a=Object(B.a)(Object(B.a)({},e),{},{amount:n});t.setItem(a)}},_=function(e){var n=Object(B.a)(Object(B.a)({},e),{},{amount:e.amount-1});t.setItem(n)},C=function(e){var n=Object(B.a)(Object(B.a)({},e),{},{amount:0});t.setItem(n)},g=t.items.map((function(e){return Object(d.jsx)(be,{price:e.price,amount:e.amount,name:e.name,onAdd:p.bind(pe,e),onRemove:_.bind(pe,e),onDelete:C.bind(pe,e)},e.id)})),y=Object(d.jsxs)("div",{className:te.a.actions,children:[Object(d.jsx)(ce,{alt:!0,type:"button",onClick:e.onCartHide,children:"Close"}),f&&Object(d.jsx)(ce,{type:"button",onClick:function(e){i(!0)},children:"Order"})]}),k=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("ul",{className:te.a["cart-items"],children:g}),Object(d.jsxs)("div",{className:te.a.total,children:[Object(d.jsx)("span",{children:"Total Amount"}),Object(d.jsx)("span",{children:x})]}),c&&Object(d.jsx)(fe,{onCartHide:e.onCartHide,onConfirm:function(e){var n={url:"https://foodorderapp-2a227-default-rtdb.firebaseio.com/orders.json",method:"POST",headers:{"Content-Type":"application/json"},body:{user:e,order:t.items}};u(n,null),O(!0),t.clearOrder()}}),!c&&y]});return Object(d.jsxs)(de,{onClick:e.onCartHide,children:[s&&!l&&Object(d.jsx)(G,{}),!s&&h&&!l&&Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"Your order was successfully submitted"})," ",Object(d.jsx)("div",{className:te.a.actions,children:Object(d.jsx)(ce,{type:"button",onClick:e.onCartHide,children:"Close"})})]}),l&&Object(d.jsxs)(K,{children:[Object(d.jsx)("h3",{children:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d \u043f\u043e \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u043f\u0440\u0438\u0447\u0438\u043d\u0430\u043c"}),Object(d.jsx)("p",{children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0437\u0430\u043a\u0430\u0437 \u043f\u043e\u0437\u0434\u043d\u0435\u0435 \u0438\u043b\u0438 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"})]}),!s&&!h&&!l&&k]})};var ve=function(){var e=Object(b.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(g,{onCartShow:function(){a(!0)}}),Object(d.jsx)("main",{children:Object(d.jsx)(X,{})}),n&&Object(d.jsx)(_e,{onCartHide:function(){a(!1)}})]})};c.a.render(Object(d.jsx)(_,{children:Object(d.jsx)(ve,{})}),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.95d11471.chunk.js.map